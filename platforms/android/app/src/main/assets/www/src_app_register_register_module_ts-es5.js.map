{"version":3,"sources":["webpack:///src/app/register/register-routing.module.ts","webpack:///src/app/register/register.module.ts","webpack:///src/app/register/register.page.ts","webpack:///src/app/register/register.page.scss","webpack:///src/app/register/register.page.html"],"names":["routes","path","component","RegisterPage","RegisterPageRoutingModule","NgModule","imports","RouterModule","exports","RegisterPageModule","CommonModule","FormsModule","IonicModule","TranslateModule","declarations","translate","auth","common","afStorage","settingService","menuCtrl","router","userInfo","step","types","settings","getSettings","subscribe","res","payload","val","enable","getVehicleType","pipe","take","snapshot","getDefaultVehicleType","console","log","Object","keys","map","key","window","open","driverTermsURL","driverPrivacyURL","showLoader","rating","parseInt","driverInitialRating","balance","parseFloat","driverSignupBonus","type","register","hideLoader","localStorage","setItem","navigateByUrl","err","showToast","message","document","getElementById","click","selectedFile","name","Date","now","ref","put","then","getDownloadURL","url","docsURL","files","TranslateService","AuthService","CommonService","AngularFireStorage","SettingService","MenuController","Router","Component","selector","template"],"mappings":"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","file":"src_app_register_register_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthService } from '../services/auth.service';\nimport { CommonService } from '../services/common.service';\nimport { MenuController } from '@ionic/angular';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { SettingService } from '../services/setting.service';\nimport { take } from 'rxjs/operators';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n  userInfo: any = {};\n  step = 'step1';\n  types: Array<any> = [];\n  settings: any = {};\n\n  constructor(\n    private translate: TranslateService,\n    private auth: AuthService,\n    private common: CommonService,\n    private afStorage: AngularFireStorage,\n    private settingService: SettingService,\n    private menuCtrl: MenuController,\n    private router: Router\n  ) {\n    this.settingService.getSettings().subscribe(res => res != null ? this.settings = res.payload.val() : this.settings = {});\n  }\n\n  ionViewDidEnter(){\n    this.menuCtrl.enable(false);\n  }\n\n  ngOnInit() {\n    this.settingService.getVehicleType().pipe(take(1)).subscribe((snapshot: any) => {\n      if (snapshot === null) {\n        this.settingService.getDefaultVehicleType().pipe(take(1)).subscribe((snapshot: any) => {\n        console.log(snapshot);\n          this.types = Object.keys(snapshot).map(function (key) {\n            return snapshot[key];\n          });\n        })\n      } else {\n        this.types = Object.keys(snapshot).map(function (key) {\n          return snapshot[key];\n        });\n      }\n    });\n  }\n\n  goto(step) {\n    this.step = step;\n  }\n\n  openTerms() {\n    window.open(this.settings.driverTermsURL, \"_blank\");\n  }\n  openPrivacy() {\n    window.open(this.settings.driverPrivacyURL, \"_blank\");\n  }\n\n  signup() {\n    console.log(this.userInfo)\n\n    this.common.showLoader();\n    this.userInfo.rating = parseInt(this.settings.driverInitialRating);\n    this.userInfo.balance = parseFloat(this.settings.driverSignupBonus);\n    this.userInfo.type = 'suv'\n\n    this.auth.register(this.userInfo).subscribe(\n      () => {\n        this.common.hideLoader();\n        localStorage.setItem('isLoggedInTec', 'true');\n        this.router.navigateByUrl('/home');\n      },\n      (err) => {\n        this.common.hideLoader();\n        this.common.showToast(err.message);\n      }\n    );\n  }\n\n  chooseDocs() { document.getElementById('docsPDF').click(); }\n  uploadDocs() {\n    this.common.showLoader();\n\n    for (let selectedFile of [(<HTMLInputElement>document.getElementById('docsPDF')).files[0]]) {\n      console.log(selectedFile.name);\n      let path = '/users/' + Date.now() + `${selectedFile.name}`;\n      let ref = this.afStorage.ref(path);\n      ref.put(selectedFile).then(() => {\n        ref.getDownloadURL().subscribe(url => this.userInfo.docsURL = url);\n        this.common.hideLoader();\n      }).catch(err => {\n        this.common.hideLoader();\n        console.log(err);\n      });\n    }\n  }\n}\n","export default \".header-md:after {\\n  background-image: none !important;\\n}\\n\\n.uploadDiv {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 120px;\\n  background: #f9f9f9;\\n  margin: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUFtQixpQ0FBQTtBQUVuQjs7QUFBQTtFQUNDLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQUdEIiwiZmlsZSI6InJlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5oZWFkZXItbWQ6YWZ0ZXIgeyBiYWNrZ3JvdW5kLWltYWdlOiBub25lICFpbXBvcnRhbnQgfVxuXG4udXBsb2FkRGl2e1xuIGRpc3BsYXk6IGZsZXg7XG4gYWxpZ24taXRlbXM6IGNlbnRlcjtcbiBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiBoZWlnaHQ6IDEyMHB4O1xuIGJhY2tncm91bmQ6ICNmOWY5Zjk7XG4gbWFyZ2luOjE2cHg7XG59XG5cbiJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"ion-text-center\\\"> Cadastrar </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"login-header\\\">\\n    <img src=\\\"../../assets/img/logo.png\\\" />\\n    <!-- <h3>{{ 'APP_NAME' | translate }}</h3>\\n    <p>{{ 'APP_SUBTEXT' | translate }} </p> -->\\n  </div>\\n  <div>\\n    <div class=\\\"ion-padding\\\" *ngIf=\\\"step == 'step1'\\\">\\n      <ion-list lines=\\\"none\\\">\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Nome Completo</ion-label>\\n          <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userInfo.name\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Email</ion-label>\\n          <ion-input type=\\\"email\\\" [(ngModel)]=\\\"userInfo.email\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Senha (MIN 6 digitos)</ion-label>\\n          <ion-input type=\\\"password\\\" [(ngModel)]=\\\"userInfo.password\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Fone</ion-label>\\n          <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"userInfo.phoneNumber\\\"></ion-input>\\n        </ion-item>\\n      </ion-list>\\n      <div style=\\\"padding: 0px 16px\\\">\\n        <ion-button color=\\\"dark\\\" expand=\\\"block\\\" (click)=\\\"goto('step2')\\\">Cadastrar</ion-button>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"step == 'step2'\\\">\\n      <ion-list lines=\\\"none\\\">\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Marca do Veículo</ion-label>\\n          <ion-input\\n            type=\\\"text\\\"\\n            [(ngModel)]=\\\"userInfo.brand\\\"\\n            placeholder=\\\"Marca do Veiculo\\\"\\n          ></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Modelo</ion-label>\\n          <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userInfo.model\\\" placeholder=\\\"Modelo\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Placa</ion-label>\\n          <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userInfo.plate\\\" placeholder=\\\"Placa\\\"></ion-input>\\n        </ion-item>\\n\\n        <p style=\\\"text-align: center; color: #4caf50\\\" *ngIf=\\\"userInfo.docsURL\\\">\\n          Upload realizado com sucesso\\n        </p>\\n        <div (click)=\\\"chooseDocs()\\\" class=\\\"uploadDiv\\\">\\n          <ion-icon name=\\\"cloud-upload\\\"></ion-icon>\\n          <p>Clique para Upload</p>\\n        </div>\\n      </ion-list>\\n      <div>\\n        <form ngNoForm>\\n          <input id=\\\"docsPDF\\\" name=\\\"file\\\" type=\\\"file\\\" (change)=\\\"uploadDocs()\\\" />\\n        </form>\\n      </div>\\n      <div style=\\\"padding: 0px 16px\\\">\\n        <ion-button color=\\\"dark\\\" expand=\\\"block\\\" (click)=\\\"signup()\\\">Registrar</ion-button>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"ion-padding\\\">\\n    <p class=\\\"termsText\\\">\\n      Para se cadastrar você precisa aceitar nossos\\n      <span class=\\\"link\\\" (click)=\\\"openTerms()\\\">termos & condições</span> &\\n      <span class=\\\"link\\\" (click)=\\\"openPrivacy()\\\">política de privacidade</span>\\n    </p>\\n  </div>\\n</ion-content>\\n\";"]}