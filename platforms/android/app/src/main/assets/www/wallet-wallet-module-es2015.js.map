{"version":3,"sources":["./src/app/wallet/wallet.page.html","./src/app/services/transaction.service.ts","./src/app/wallet/wallet-routing.module.ts","./src/app/wallet/wallet.module.ts","./src/app/wallet/wallet.page.scss","./src/app/wallet/wallet.page.ts"],"names":[],"mappings":"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","file":"wallet-wallet-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>{{'WALLET' | translate}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <div class=\\\"header\\\">\\n    <h5>{{'CURRENT_BALANCE' | translate}}</h5>\\n    <p class=\\\"amountText\\\">{{settings.currency}} {{ (driver)?.balance }}</p>\\n    <ion-button slot=\\\"end\\\" color=\\\"light\\\" size=\\\"small\\\" fill=\\\"outline\\\" (click)=\\\"withdraw()\\\">{{'REQUEST' | translate}}\\n    </ion-button>\\n  </div>\\n  <div class=\\\"ion-padding\\\" class=\\\"withdrawl-list\\\">\\n    <ion-list lines=\\\"none\\\">\\n      <p style=\\\"margin:8px\\\">{{'HISTORY' | translate}}</p>\\n      <ion-item *ngFor=\\\"let record of records\\\">\\n        <ion-icon name=\\\"logo-usd\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-label>\\n          <h3>ID: {{record.createdAt }}</h3>\\n          <p>{{ record.createdAt | date: 'dd-MMM-yyyy hh:mm a'}}</p>\\n        </ion-label>\\n        <ion-note slot=\\\"end\\\">\\n          <div class=\\\"amount\\\">{{settings.currency}} {{ record.amount }}</div>\\n          <div class=\\\"status\\\">{{ record.status}}</div>\\n        </ion-note>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n</ion-content>\";","import { Injectable } from '@angular/core';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { AuthService } from './auth.service';\nimport { TRANSACTION_TYPE_WITHDRAW } from 'src/environments/environment.prod';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TransactionService {\n\n  constructor(private db: AngularFireDatabase) { }\n\n  getTransactions(uid) {\n    return this.db.list('transactions', ref => ref.orderByChild('userId').equalTo(uid));\n  }\n\n  widthDraw(user, amount: number) {\n    return this.db.list('transactions/').push({\n      userId: user.uid,\n      name: user.name,\n      amount: amount,\n      createdAt: Date.now(),\n      type: TRANSACTION_TYPE_WITHDRAW,\n      status: 'PENDING'\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { WalletPage } from './wallet.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WalletPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WalletPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WalletPageRoutingModule } from './wallet-routing.module';\n\nimport { WalletPage } from './wallet.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    WalletPageRoutingModule\n  ],\n  declarations: [WalletPage]\n})\nexport class WalletPageModule {}\n","export default \".header {\\n  min-height: 200px;\\n  text-align: center;\\n  padding: 2em;\\n  background-color: var(--ion-color-dark);\\n}\\n.header h5 {\\n  text-transform: uppercase;\\n  color: #777777;\\n  font-size: 12px;\\n  margin: 0;\\n}\\n.header .amountText {\\n  font-size: 28px;\\n  font-weight: bold;\\n  color: var(--ion-color-dark-contrast);\\n}\\nion-item {\\n  --background: #f9f9f9;\\n  margin: 8px;\\n  border-radius: 8px;\\n}\\n.footer-md:before {\\n  background: none;\\n}\\n.withdrawl-list .amount {\\n  font-weight: bold;\\n  color: var(--ion-color-dark);\\n  font-size: 16px;\\n  text-align: right;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvd2FsbGV0L3dhbGxldC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLHVDQUFBO0FBQ0o7QUFBSTtFQUNJLHlCQUFBO0VBQ0EsY0FBQTtFQUNBLGVBQUE7RUFDQSxTQUFBO0FBRVI7QUFBSTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLHFDQUFBO0FBRVI7QUFDQTtFQUNJLHFCQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0FBRUo7QUFBQTtFQUNJLGdCQUFBO0FBR0o7QUFDSTtFQUNJLGlCQUFBO0VBQ0EsNEJBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7QUFFUiIsImZpbGUiOiJzcmMvYXBwL3dhbGxldC93YWxsZXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmhlYWRlcntcbiAgICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgICBoNXtcbiAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICAgICAgY29sb3I6ICM3Nzc3Nzc7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbWFyZ2luOjA7XG4gICAgfVxuICAgIC5hbW91bnRUZXh0e1xuICAgICAgICBmb250LXNpemU6IDI4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhcmstY29udHJhc3QpXG4gICAgfVxufVxuaW9uLWl0ZW17XG4gICAgLS1iYWNrZ3JvdW5kOiAjZjlmOWY5O1xuICAgIG1hcmdpbjogOHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbn1cbi5mb290ZXItbWQ6YmVmb3Jle1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG59XG5cbi53aXRoZHJhd2wtbGlzdHtcbiAgICAuYW1vdW50e1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICB9XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { DriverService } from '../services/driver.service';\nimport { TransactionService } from '../services/transaction.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CommonService } from '../services/common.service';\nimport { AlertController } from '@ionic/angular';\nimport { SettingService } from '../services/setting.service';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n  selector: 'app-wallet',\n  templateUrl: './wallet.page.html',\n  styleUrls: ['./wallet.page.scss'],\n})\nexport class WalletPage implements OnInit {\n\n  records: any;\n  driver: any;\n  settings: any = {};\n\n  constructor(private transactionService: TransactionService,\n    private translate: TranslateService,\n    private driverService: DriverService,\n    private common: CommonService,\n    private alertCtrl: AlertController,\n    private ss: SettingService,\n    private authService: AuthService\n  ) {\n\n  }\n  ionViewDidEnter() {\n    this.authService.getUserData().then(user => {\n      this.ss.getSettings().subscribe(res => res != null ? this.settings = res.payload.val() : this.settings = {});\n      this.driverService.getDriver(user.uid).valueChanges().subscribe(snapshot => this.driver = snapshot);\n      this.transactionService.getTransactions(user.uid).valueChanges().subscribe(snapshot => snapshot != null ? this.records = snapshot.reverse() : []);\n    })\n  }\n\n  withdraw() {\n\n    this.alertCtrl.create({\n      header: \"Make a Withdraw\",\n      inputs: [\n        { name: 'amount', placeholder: 'Amount' },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Submit',\n          handler: data => {\n            console.log(data);\n            console.log(this.driver);\n            if (parseFloat(data.amount) > parseFloat(this.driver.balance)) {\n              this.common.showAlert(\"Insufficient Balance\");\n            }\n            else {\n              this.transactionService.widthDraw(this.driver, data.amount).then(() => {\n                this.common.showToast('withdraw Requested');\n              });\n            }\n          }\n        }\n      ]\n    }).then(x => x.present());\n  }\n\n  ngOnInit() {\n  }\n\n}\n"],"sourceRoot":"webpack:///"}