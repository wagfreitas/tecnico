!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[6277],{6277:function(n,r,o){"use strict";o.r(r),o.d(r,{WalletPageModule:function(){return q}});var i=o(8583),a=o(3679),c=o(2859),u=o(3025),s=o(7716),l=o(9019),d=o(7318),f=function(){var n=function(){function n(e){t(this,n),this.db=e}return e(n,[{key:"getTransactions",value:function(t){return this.db.list("transactions",function(n){return n.orderByChild("userId").equalTo(t)})}},{key:"widthDraw",value:function(t,n){return this.db.list("transactions/").push({userId:t.uid,name:t.name,amount:n,createdAt:Date.now(),type:l.K5,status:"PENDING"})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(s.LFG(d.KQ))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),h=o(5469),g=o(4050),p=o(5620),v=o(4207),m=o(7556);function Z(t,n){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s.TgZ(2,"h3"),s._uU(3),s.qZA(),s.TgZ(4,"p"),s._uU(5),s.ALo(6,"date"),s.qZA(),s.qZA(),s.TgZ(7,"ion-note",10),s.TgZ(8,"div",11),s._uU(9),s.qZA(),s.TgZ(10,"div",12),s._uU(11),s.qZA(),s.qZA(),s.qZA()),2&t){var e=n.$implicit;s.xp6(3),s.hij("ID: ",e.createdAt,""),s.xp6(2),s.Oqu(s.xi3(6,4,e.createdAt,"dd-MMM-yyyy hh:mm a")),s.xp6(4),s.hij(" ",e.amount,""),s.xp6(2),s.Oqu(e.status)}}var w,b,A=[{path:"",component:(w=function(){function n(e,r,o,i,a,c,u){t(this,n),this.transactionService=e,this.translate=r,this.driverService=o,this.common=i,this.alertCtrl=a,this.ss=c,this.authService=u,this.settings={}}return e(n,[{key:"ionViewDidEnter",value:function(){var t=this;this.authService.getUserData().then(function(n){t.ss.getSettings().subscribe(function(n){return t.settings=null!=n?n.payload.val():{}}),t.driverService.getDriver(n.uid).valueChanges().subscribe(function(n){return t.driver=n}),t.transactionService.getTransactions(n.uid).valueChanges().subscribe(function(n){return null!=n?t.records=n.reverse():[]})})}},{key:"withdraw",value:function(){var t=this;this.alertCtrl.create({header:"Make a Withdraw",inputs:[{name:"amount",placeholder:"Amount"}],buttons:[{text:"Cancel",handler:function(t){console.log("Cancel clicked")}},{text:"Submit",handler:function(n){console.log(n),console.log(t.driver),parseFloat(n.amount)>parseFloat(t.driver.balance)?t.common.showAlert("Insufficient Balance"):t.transactionService.widthDraw(t.driver,n.amount).then(function(){t.common.showToast("withdraw Requested")})}}]}).then(function(t){return t.present()})}},{key:"ngOnInit",value:function(){}}]),n}(),w.\u0275fac=function(t){return new(t||w)(s.Y36(f),s.Y36(h.sK),s.Y36(g.F),s.Y36(p.v),s.Y36(c.Br),s.Y36(v.R),s.Y36(m.e))},w.\u0275cmp=s.Xpm({type:w,selectors:[["app-wallet"]],decls:19,vars:3,consts:[["color","dark"],["slot","start"],[1,"ion-text-center"],[1,"header"],[1,"amountText"],["slot","end","color","light","size","small","fill","outline",3,"click"],[1,"withdrawl-list"],["lines","none"],[2,"margin","8px"],[4,"ngFor","ngForOf"],["slot","end"],[1,"amount"],[1,"status"]],template:function(t,n){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar",0),s.TgZ(2,"ion-buttons",1),s._UZ(3,"ion-menu-button"),s.qZA(),s.TgZ(4,"ion-title",2),s._uU(5,"Carteira"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"ion-content"),s.TgZ(7,"div",3),s.TgZ(8,"h5"),s._uU(9,"Balan\xe7o Atual"),s.qZA(),s.TgZ(10,"p",4),s._uU(11),s.qZA(),s.TgZ(12,"ion-button",5),s.NdJ("click",function(){return n.withdraw()}),s._uU(13,"Solicitar Pagamento "),s.qZA(),s.qZA(),s.TgZ(14,"div",6),s.TgZ(15,"ion-list",7),s.TgZ(16,"p",8),s._uU(17,"Hist\xf3rico"),s.qZA(),s.YNc(18,Z,12,7,"ion-item",9),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(11),s.AsE("",n.settings.currency," ",null==n.driver?null:n.driver.balance,""),s.xp6(7),s.Q6J("ngForOf",n.records))},directives:[c.Gu,c.sr,c.Sm,c.fG,c.wd,c.W2,c.YG,c.q_,i.sg,c.Ie,c.Q$,c.uN],pipes:[i.uU],styles:[".header[_ngcontent-%COMP%]{min-height:200px;text-align:center;padding:2em;background-color:var(--ion-color-dark)}.header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-transform:uppercase;color:#777;font-size:12px;margin:0}.header[_ngcontent-%COMP%]   .amountText[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--ion-color-dark-contrast)}ion-item[_ngcontent-%COMP%]{--background:#f9f9f9;margin:8px;border-radius:8px}.footer-md[_ngcontent-%COMP%]:before{background:none}.withdrawl-list[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-dark);font-size:16px;text-align:right}"]}),w)}],T=function(){var n=e(function n(){t(this,n)});return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),n}(),q=((b=e(function n(){t(this,n)})).\u0275fac=function(t){return new(t||b)},b.\u0275mod=s.oAB({type:b}),b.\u0275inj=s.cJS({imports:[[i.ez,a.u5,c.Pc,h.aw,T]]}),b)}}])}();