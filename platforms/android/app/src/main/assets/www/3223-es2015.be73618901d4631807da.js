(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[3223],{3223:function(e,o,n){"use strict";n.r(o),n.d(o,{ProfilePageModule:function(){return q}});var t=n(8583),i=n(3679),r=n(2859),c=n(3025),s=n(5257),l=n(7716),a=n(7556),u=n(4207),g=n(5620),d=n(5469),p=n(1792);function h(e,o){if(1&e){const e=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",13),l.TgZ(2,"img",14),l.NdJ("click",function(){return l.CHM(e),l.oxw().chooseFile()}),l.qZA(),l.TgZ(3,"form",15),l.TgZ(4,"input",16),l.NdJ("change",function(){return l.CHM(e),l.oxw().upload()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(5,"ion-list",17),l.TgZ(6,"ion-item"),l.TgZ(7,"ion-label",18),l._uU(8,"NOME COMPLETO"),l.qZA(),l.TgZ(9,"ion-input",19),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw().user.name=o}),l.qZA(),l.qZA(),l.TgZ(10,"ion-item"),l.TgZ(11,"ion-label",18),l._uU(12,"N\xdaMERO DO FONE"),l.qZA(),l.TgZ(13,"ion-input",20),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw().user.phoneNumber=o}),l.qZA(),l.qZA(),l.TgZ(14,"ion-item"),l.TgZ(15,"ion-label",18),l._uU(16,"DADOS BANC\xc1RIOS"),l.qZA(),l.TgZ(17,"ion-textarea",6),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw().user.bankinfo=o}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.s9C("src",e.user.photoURL,l.LSH),l.xp6(7),l.Q6J("ngModel",e.user.name),l.xp6(4),l.Q6J("ngModel",e.user.phoneNumber),l.xp6(4),l.Q6J("ngModel",e.user.bankinfo)}}function Z(e,o){if(1&e&&(l.TgZ(0,"ion-select-option",28),l._uU(1),l.qZA()),2&e){const e=o.$implicit;l.s9C("value",e.type),l.xp6(1),l.hij(" ",e.name," ")}}function f(e,o){if(1&e){const e=l.EpF();l.TgZ(0,"ion-item"),l.TgZ(1,"ion-label",21),l._uU(2,"Tipo do Carro"),l.qZA(),l.TgZ(3,"ion-select",6),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw(2).user.type=o}),l.YNc(4,Z,2,2,"ion-select-option",27),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(3),l.Q6J("ngModel",e.user.type),l.xp6(1),l.Q6J("ngForOf",e.types)}}function m(e,o){if(1&e){const e=l.EpF();l.TgZ(0,"ion-button",4),l.NdJ("click",function(){l.CHM(e);const o=l.oxw(2);return o.download(o.user.docsURL)}),l._UZ(1,"ion-icon",29),l.qZA()}}function A(e,o){if(1&e){const e=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"ion-list",17),l.TgZ(2,"ion-item"),l.TgZ(3,"ion-label",21),l._uU(4,"Marca do Carro"),l.qZA(),l.TgZ(5,"ion-input",22),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw().user.brand=o}),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.TgZ(7,"ion-item"),l.TgZ(8,"ion-label",21),l._uU(9,"Modelo do Carro"),l.qZA(),l.TgZ(10,"ion-input",22),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw().user.model=o}),l.ALo(11,"translate"),l.qZA(),l.qZA(),l.TgZ(12,"ion-item"),l.TgZ(13,"ion-label",21),l._uU(14,"Placa do Carro"),l.qZA(),l.TgZ(15,"ion-input",22),l.NdJ("ngModelChange",function(o){return l.CHM(e),l.oxw().user.plate=o}),l.ALo(16,"translate"),l.qZA(),l.qZA(),l.YNc(17,f,5,2,"ion-item",23),l.TgZ(18,"ion-item"),l.TgZ(19,"ion-label"),l.TgZ(20,"h3"),l._uU(21),l.ALo(22,"translate"),l.qZA(),l.qZA(),l.TgZ(23,"ion-buttons",3),l.TgZ(24,"ion-button",4),l.NdJ("click",function(){return l.CHM(e),l.oxw().chooseDocs()}),l._UZ(25,"ion-icon",24),l.qZA(),l.YNc(26,m,2,0,"ion-button",25),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"div"),l.TgZ(28,"form",15),l.TgZ(29,"input",26),l.NdJ("change",function(){return l.CHM(e),l.oxw().uploadDocs()}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(5),l.s9C("placeholder",l.lcZ(6,9,"CAR_BRAND")),l.Q6J("ngModel",e.user.brand),l.xp6(5),l.s9C("placeholder",l.lcZ(11,11,"CAR_MODEL")),l.Q6J("ngModel",e.user.model),l.xp6(5),l.s9C("placeholder",l.lcZ(16,13,"PLATE_NUMBER")),l.Q6J("ngModel",e.user.plate),l.xp6(2),l.Q6J("ngIf",e.types),l.xp6(4),l.hij("",l.lcZ(22,15,"UPLOAD")," Docs"),l.xp6(5),l.Q6J("ngIf",e.user.docsURL)}}const T=[{path:"",component:(()=>{class e{constructor(e,o,n,t,i,r,c){this.authService=e,this.settingService=o,this.common=n,this.platform=t,this.translate=i,this.router=r,this.afStorage=c,this.user={},this.rating=5,this.types=[],this.tabs="profile"}ngOnInit(){this.authService.getUserData().then(e=>{this.authService.getUser(e.uid).valueChanges().pipe((0,s.q)(1)).subscribe(e=>{console.log(e),this.user=e})}),this.settingService.getVehicleType().pipe((0,s.q)(1)).subscribe(e=>{null===e?this.settingService.getDefaultVehicleType().pipe((0,s.q)(1)).subscribe(e=>{console.log(e),this.types=Object.keys(e).map(function(o){return e[o]})}):this.types=Object.keys(e).map(function(o){return e[o]})}),console.log(this.user)}save(){console.log(this.user),this.authService.getUser(this.user.uid).update(this.user).then(e=>{this.common.showToast("Updated successfully"),this.router.navigateByUrl("/home")})}chooseFile(){document.getElementById("avatar").click()}upload(){this.common.showLoader();for(let e of[document.getElementById("avatar").files[0]]){let o="/users/"+Date.now()+`_${e.name}`,n=this.afStorage.ref(o);n.put(e).then(()=>{n.getDownloadURL().subscribe(e=>{this.user.photoURL=e}),this.common.hideLoader()}).catch(e=>{this.common.hideLoader(),console.log(e)})}}chooseDocs(){document.getElementById("docsPDF").click()}uploadDocs(){this.common.showLoader();for(let e of[document.getElementById("docsPDF").files[0]]){console.log(e.name);let o="/users/"+Date.now()+`${e.name}`,n=this.afStorage.ref(o);n.put(e).then(()=>{n.getDownloadURL().subscribe(e=>this.user.docsURL=e),this.common.hideLoader()}).catch(e=>{this.common.hideLoader(),console.log(e)})}}download(e){window.open(e,"_blank")}logout(){this.authService.logout().then(()=>{localStorage.clear(),this.router.navigateByUrl("/login",{skipLocationChange:!0,replaceUrl:!0})})}}return e.\u0275fac=function(o){return new(o||e)(l.Y36(a.e),l.Y36(u.R),l.Y36(g.v),l.Y36(r.t4),l.Y36(d.sK),l.Y36(c.F0),l.Y36(p.Q1))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-profile"]],decls:21,vars:5,consts:[["color","dark"],["slot","start"],[1,"ion-text-center"],["slot","end"],[3,"click"],["name","log-out"],[3,"ngModel","ngModelChange"],["value","profile"],["value","carinfo"],[1,"ion-padding",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"ion-padding"],["expand","block",3,"click"],[2,"text-align","center"],["onerror","this.src='./assets/img/default.png'",2,"width","80px","height","80px","border-radius","100px",3,"src","click"],["ngNoForm",""],["id","avatar","name","file","type","file",3,"change"],["lines","none"],["position","stacked","color","primary"],["type","text","placeholder","Nome Completo",3,"ngModel","ngModelChange"],["type","tel","placeholder","Telefone",3,"ngModel","ngModelChange"],["position","stacked"],["type","text",3,"ngModel","placeholder","ngModelChange"],[4,"ngIf"],["name","cloud-upload"],[3,"click",4,"ngIf"],["id","docsPDF","name","file","type","file",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","cloud-download"]],template:function(e,o){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-menu-button"),l.qZA(),l.TgZ(4,"ion-title",2),l._uU(5),l.qZA(),l.TgZ(6,"ion-buttons",3),l.TgZ(7,"ion-button",4),l.NdJ("click",function(){return o.logout()}),l._UZ(8,"ion-icon",5),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.TgZ(10,"ion-segment",6),l.NdJ("ngModelChange",function(e){return o.tabs=e}),l.TgZ(11,"ion-segment-button",7),l._uU(12," DADOS B\xc1SICOS "),l.qZA(),l.TgZ(13,"ion-segment-button",8),l._uU(14," DADOS DO CARRO "),l.qZA(),l.qZA(),l.TgZ(15,"div",9),l.YNc(16,h,18,4,"div",10),l.YNc(17,A,30,17,"div",10),l.qZA(),l.qZA(),l.TgZ(18,"ion-footer",11),l.TgZ(19,"ion-button",12),l.NdJ("click",function(){return o.save()}),l._uU(20,"Salvar"),l.qZA(),l.qZA()),2&e&&(l.xp6(5),l.Oqu(o.user.name),l.xp6(5),l.Q6J("ngModel",o.tabs),l.xp6(5),l.Q6J("ngSwitch",o.tabs),l.xp6(1),l.Q6J("ngSwitchCase","profile"),l.xp6(1),l.Q6J("ngSwitchCase","carinfo"))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.gu,r.W2,r.cJ,r.QI,i.JJ,i.On,r.GO,t.RF,t.n9,r.fr,r.q_,r.Ie,r.Q$,r.pK,r.j9,r.g2,t.O5,r.t9,t.sg,r.n0],pipes:[d.X$],styles:[".footer-md[_ngcontent-%COMP%]:before, .header-md[_ngcontent-%COMP%]:after{background:none}ion-segment[_ngcontent-%COMP%]{--background:#222;--color:#fff}ion-segment-button[_ngcontent-%COMP%]{--background:#222;--background-checked:#222;--background-focused:#222;--background-hover:#222;--border-color:#fff;--color:#ddd;--color-focused:#fff;--color-checked:#ffeb3b}"]}),e})()}];let b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[c.Bz.forChild(T)],c.Bz]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[t.ez,i.u5,r.Pc,d.aw,b]]}),e})()}}]);