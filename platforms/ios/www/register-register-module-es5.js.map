{"version":3,"sources":["webpack:///src/app/register/register.page.html","webpack:///src/app/register/register-routing.module.ts","webpack:///src/app/register/register.module.ts","webpack:///src/app/register/register.page.scss","webpack:///src/app/register/register.page.ts"],"names":["routes","path","component","RegisterPageRoutingModule","imports","forChild","exports","RegisterPageModule","declarations","RegisterPage","translate","auth","common","afStorage","settingService","menuCtrl","router","userInfo","step","types","settings","getSettings","subscribe","res","payload","val","enable","getVehicleType","pipe","snapshot","getDefaultVehicleType","console","log","Object","keys","map","key","window","open","driverTermsURL","driverPrivacyURL","showLoader","rating","parseInt","driverInitialRating","balance","parseFloat","driverSignupBonus","type","register","hideLoader","localStorage","setItem","navigateByUrl","err","showToast","message","document","getElementById","click","selectedFile","name","Date","now","ref","put","then","getDownloadURL","url","docsURL","files","selector","template"],"mappings":"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","file":"register-register-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title> Cadastrar </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"login-header\\\">\\n    <img src=\\\"./assets/img/logo.png\\\" />\\n    <!-- <h3>{{ 'APP_NAME' | translate }}</h3>\\n    <p>{{ 'APP_SUBTEXT' | translate }} </p> -->\\n  </div>\\n  <div>\\n    <div class=\\\"ion-padding\\\" *ngIf=\\\"step == 'step1'\\\">\\n      <ion-list lines=\\\"none\\\">\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Nome Completo</ion-label>\\n          <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userInfo.name\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Email</ion-label>\\n          <ion-input type=\\\"email\\\" [(ngModel)]=\\\"userInfo.email\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Senha (MIN 6 digitos)</ion-label>\\n          <ion-input type=\\\"password\\\" [(ngModel)]=\\\"userInfo.password\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Fone</ion-label>\\n          <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"userInfo.phoneNumber\\\"></ion-input>\\n        </ion-item>\\n      </ion-list>\\n      <div style=\\\"padding: 0px 16px\\\">\\n        <ion-button color=\\\"dark\\\" expand=\\\"block\\\" (click)=\\\"goto('step2')\\\">Cadastrar</ion-button>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"step == 'step2'\\\">\\n      <ion-list lines=\\\"none\\\">\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Marca do Veículo</ion-label>\\n          <ion-input\\n            type=\\\"text\\\"\\n            [(ngModel)]=\\\"userInfo.brand\\\"\\n            placeholder=\\\"Marca do Veiculo\\\"\\n          ></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Modelo</ion-label>\\n          <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userInfo.model\\\" placeholder=\\\"Modelo\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"stacked\\\">Placa</ion-label>\\n          <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userInfo.plate\\\" placeholder=\\\"Placa\\\"></ion-input>\\n        </ion-item>\\n\\n        <p style=\\\"text-align: center; color: #4caf50\\\" *ngIf=\\\"userInfo.docsURL\\\">\\n          Upload realizado com sucesso\\n        </p>\\n        <div (click)=\\\"chooseDocs()\\\" class=\\\"uploadDiv\\\">\\n          <ion-icon name=\\\"cloud-upload\\\"></ion-icon>\\n          <p>Clique para Upload</p>\\n        </div>\\n      </ion-list>\\n      <div>\\n        <form ngNoForm>\\n          <input id=\\\"docsPDF\\\" name=\\\"file\\\" type=\\\"file\\\" (change)=\\\"uploadDocs()\\\" />\\n        </form>\\n      </div>\\n      <div style=\\\"padding: 0px 16px\\\">\\n        <ion-button color=\\\"dark\\\" expand=\\\"block\\\" (click)=\\\"signup()\\\">Registrar</ion-button>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"ion-padding\\\">\\n    <p class=\\\"termsText\\\">\\n      Para se cadastrar você precisa aceitar nossos\\n      <span class=\\\"link\\\" (click)=\\\"openTerms()\\\">termos & condições</span> &\\n      <span class=\\\"link\\\" (click)=\\\"openPrivacy()\\\">política de privacidade</span>\\n    </p>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","export default \".header-md:after {\\n  background-image: none !important;\\n}\\n\\n.uploadDiv {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 120px;\\n  background: #f9f9f9;\\n  margin: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQW1CLGlDQUFBO0FBRW5COztBQUFBO0VBQ0MsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0FBR0QiLCJmaWxlIjoic3JjL2FwcC9yZWdpc3Rlci9yZWdpc3Rlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGVhZGVyLW1kOmFmdGVyIHsgYmFja2dyb3VuZC1pbWFnZTogbm9uZSAhaW1wb3J0YW50IH1cblxuLnVwbG9hZERpdntcbiBkaXNwbGF5OiBmbGV4O1xuIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4ganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gaGVpZ2h0OiAxMjBweDtcbiBiYWNrZ3JvdW5kOiAjZjlmOWY5O1xuIG1hcmdpbjoxNnB4O1xufVxuXG4iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthService } from '../services/auth.service';\nimport { CommonService } from '../services/common.service';\nimport { MenuController } from '@ionic/angular';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { SettingService } from '../services/setting.service';\nimport { take } from 'rxjs/operators';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n  userInfo: any = {};\n  step = 'step1';\n  types: Array<any> = [];\n  settings: any = {};\n\n  constructor(\n    private translate: TranslateService,\n    private auth: AuthService,\n    private common: CommonService,\n    private afStorage: AngularFireStorage,\n    private settingService: SettingService,\n    private menuCtrl: MenuController,\n    private router: Router\n  ) {\n    this.settingService.getSettings().subscribe(res => res != null ? this.settings = res.payload.val() : this.settings = {});\n  }\n\n  ionViewDidEnter(){\n    this.menuCtrl.enable(false);\n  }\n\n  ngOnInit() {\n    this.settingService.getVehicleType().pipe(take(1)).subscribe((snapshot: any) => {\n      if (snapshot === null) {\n        this.settingService.getDefaultVehicleType().pipe(take(1)).subscribe((snapshot: any) => {\n        console.log(snapshot);\n          this.types = Object.keys(snapshot).map(function (key) {\n            return snapshot[key];\n          });\n        })\n      } else {\n        this.types = Object.keys(snapshot).map(function (key) {\n          return snapshot[key];\n        });\n      }\n    });\n  }\n\n  goto(step) {\n    this.step = step;\n  }\n\n  openTerms() {\n    window.open(this.settings.driverTermsURL, \"_blank\");\n  }\n  openPrivacy() {\n    window.open(this.settings.driverPrivacyURL, \"_blank\");\n  }\n\n  signup() {\n    console.log(this.userInfo)\n\n    this.common.showLoader();\n    this.userInfo.rating = parseInt(this.settings.driverInitialRating);\n    this.userInfo.balance = parseFloat(this.settings.driverSignupBonus);\n    this.userInfo.type = 'suv'\n\n    this.auth.register(this.userInfo).subscribe(\n      () => {\n        this.common.hideLoader();\n        localStorage.setItem('isLoggedInTec', 'true');\n        this.router.navigateByUrl('/home');\n      },\n      (err) => {\n        this.common.hideLoader();\n        this.common.showToast(err.message);\n      }\n    );\n  }\n\n  chooseDocs() { document.getElementById('docsPDF').click(); }\n  uploadDocs() {\n    this.common.showLoader();\n\n    for (let selectedFile of [(<HTMLInputElement>document.getElementById('docsPDF')).files[0]]) {\n      console.log(selectedFile.name);\n      let path = '/users/' + Date.now() + `${selectedFile.name}`;\n      let ref = this.afStorage.ref(path);\n      ref.put(selectedFile).then(() => {\n        ref.getDownloadURL().subscribe(url => this.userInfo.docsURL = url);\n        this.common.hideLoader();\n      }).catch(err => {\n        this.common.hideLoader();\n        console.log(err);\n      });\n    }\n  }\n}\n"]}