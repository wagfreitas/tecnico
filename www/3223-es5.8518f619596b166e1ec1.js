!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,o,t){return o&&n(e.prototype,o),t&&n(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[3223],{3223:function(n,t,i){"use strict";i.r(t),i.d(t,{ProfilePageModule:function(){return w}});var r=i(8583),c=i(3679),a=i(2859),u=i(3025),l=i(5257),s=i(7716),g=i(7556),d=i(4207),f=i(5620),p=i(5469),Z=i(1792);function h(e,n){if(1&e){var o=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",13),s.TgZ(2,"img",14),s.NdJ("click",function(){return s.CHM(o),s.oxw().chooseFile()}),s.qZA(),s.TgZ(3,"form",15),s.TgZ(4,"input",16),s.NdJ("change",function(){return s.CHM(o),s.oxw().upload()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"ion-list",17),s.TgZ(6,"ion-item"),s.TgZ(7,"ion-label",18),s._uU(8,"NOME COMPLETO"),s.qZA(),s.TgZ(9,"ion-input",19),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.name=e}),s.ALo(10,"translate"),s.qZA(),s.qZA(),s.TgZ(11,"ion-item"),s.TgZ(12,"ion-label",18),s._uU(13,"N\xdaMERO DO FONE"),s.qZA(),s.TgZ(14,"ion-input",20),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.phoneNumber=e}),s.ALo(15,"translate"),s.qZA(),s.qZA(),s.TgZ(16,"ion-item"),s.TgZ(17,"ion-label",18),s._uU(18,"EMAIL"),s.qZA(),s.TgZ(19,"ion-input",21),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.email=e}),s.ALo(20,"translate"),s.qZA(),s.qZA(),s.TgZ(21,"ion-item"),s.TgZ(22,"ion-label",18),s._uU(23,"DADOS BANC\xc1RIOS"),s.qZA(),s.TgZ(24,"ion-textarea",6),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.bankinfo=e}),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){var t=s.oxw();s.xp6(2),s.s9C("src",t.user.photoURL,s.LSH),s.xp6(7),s.s9C("placeholder",s.lcZ(10,8,"FULLNAME")),s.Q6J("ngModel",t.user.name),s.xp6(5),s.s9C("placeholder",s.lcZ(15,10,"PHONE_NUMBER")),s.Q6J("ngModel",t.user.phoneNumber),s.xp6(5),s.s9C("placeholder",s.lcZ(20,12,"EMAIL_ADDRESS")),s.Q6J("ngModel",t.user.email),s.xp6(5),s.Q6J("ngModel",t.user.bankinfo)}}function m(e,n){if(1&e&&(s.TgZ(0,"ion-select-option",27),s._uU(1),s.qZA()),2&e){var o=n.$implicit;s.s9C("value",o.type),s.xp6(1),s.hij(" ",o.name," ")}}function A(e,n){if(1&e){var o=s.EpF();s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label",18),s._uU(2,"Tipo do Carro"),s.qZA(),s.TgZ(3,"ion-select",6),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw(2).user.type=e}),s.YNc(4,m,2,2,"ion-select-option",26),s.qZA(),s.qZA()}if(2&e){var t=s.oxw(2);s.xp6(3),s.Q6J("ngModel",t.user.type),s.xp6(1),s.Q6J("ngForOf",t.types)}}function v(e,n){if(1&e){var o=s.EpF();s.TgZ(0,"ion-button",4),s.NdJ("click",function(){s.CHM(o);var e=s.oxw(2);return e.download(e.user.docsURL)}),s._UZ(1,"ion-icon",28),s.qZA()}}function b(e,n){if(1&e){var o=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"ion-list",17),s.TgZ(2,"ion-item"),s.TgZ(3,"ion-label",18),s._uU(4,"Marca do Carro"),s.qZA(),s.TgZ(5,"ion-input",19),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.brand=e}),s.ALo(6,"translate"),s.qZA(),s.qZA(),s.TgZ(7,"ion-item"),s.TgZ(8,"ion-label",18),s._uU(9,"Modelo do Carro"),s.qZA(),s.TgZ(10,"ion-input",19),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.model=e}),s.ALo(11,"translate"),s.qZA(),s.qZA(),s.TgZ(12,"ion-item"),s.TgZ(13,"ion-label",18),s._uU(14,"Placa do Carro"),s.qZA(),s.TgZ(15,"ion-input",19),s.NdJ("ngModelChange",function(e){return s.CHM(o),s.oxw().user.plate=e}),s.ALo(16,"translate"),s.qZA(),s.qZA(),s.YNc(17,A,5,2,"ion-item",22),s.TgZ(18,"ion-item"),s.TgZ(19,"ion-label"),s.TgZ(20,"h3"),s._uU(21),s.ALo(22,"translate"),s.qZA(),s.qZA(),s.TgZ(23,"ion-buttons",3),s.TgZ(24,"ion-button",4),s.NdJ("click",function(){return s.CHM(o),s.oxw().chooseDocs()}),s._UZ(25,"ion-icon",23),s.qZA(),s.YNc(26,v,2,0,"ion-button",24),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div"),s.TgZ(28,"form",15),s.TgZ(29,"input",25),s.NdJ("change",function(){return s.CHM(o),s.oxw().uploadDocs()}),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){var t=s.oxw();s.xp6(5),s.s9C("placeholder",s.lcZ(6,9,"CAR_BRAND")),s.Q6J("ngModel",t.user.brand),s.xp6(5),s.s9C("placeholder",s.lcZ(11,11,"CAR_MODEL")),s.Q6J("ngModel",t.user.model),s.xp6(5),s.s9C("placeholder",s.lcZ(16,13,"PLATE_NUMBER")),s.Q6J("ngModel",t.user.plate),s.xp6(2),s.Q6J("ngIf",t.types),s.xp6(4),s.hij("",s.lcZ(22,15,"UPLOAD")," Docs"),s.xp6(5),s.Q6J("ngIf",t.user.docsURL)}}var T,q,C=[{path:"",component:(T=function(){function n(o,t,i,r,c,a,u){e(this,n),this.authService=o,this.settingService=t,this.common=i,this.platform=r,this.translate=c,this.router=a,this.afStorage=u,this.user={},this.rating=5,this.types=[],this.tabs="profile"}return o(n,[{key:"ngOnInit",value:function(){var e=this;this.authService.getUserData().then(function(n){e.authService.getUser(n.uid).valueChanges().pipe((0,l.q)(1)).subscribe(function(n){console.log(n),e.user=n})}),this.settingService.getVehicleType().pipe((0,l.q)(1)).subscribe(function(n){null===n?e.settingService.getDefaultVehicleType().pipe((0,l.q)(1)).subscribe(function(n){console.log(n),e.types=Object.keys(n).map(function(e){return n[e]})}):e.types=Object.keys(n).map(function(e){return n[e]})}),console.log(this.user)}},{key:"save",value:function(){var e=this;console.log(this.user),this.authService.getUser(this.user.uid).update(this.user).then(function(n){e.common.showToast("Updated successfully"),e.router.navigateByUrl("/home")})}},{key:"chooseFile",value:function(){document.getElementById("avatar").click()}},{key:"upload",value:function(){var e=this;this.common.showLoader();for(var n=function(){var n=t[o],i="/users/"+Date.now()+"_".concat(n.name),r=e.afStorage.ref(i);r.put(n).then(function(){r.getDownloadURL().subscribe(function(n){e.user.photoURL=n}),e.common.hideLoader()}).catch(function(n){e.common.hideLoader(),console.log(n)})},o=0,t=[document.getElementById("avatar").files[0]];o<t.length;o++)n()}},{key:"chooseDocs",value:function(){document.getElementById("docsPDF").click()}},{key:"uploadDocs",value:function(){var e=this;this.common.showLoader();for(var n=function(){var n=t[o];console.log(n.name);var i="/users/"+Date.now()+"".concat(n.name),r=e.afStorage.ref(i);r.put(n).then(function(){r.getDownloadURL().subscribe(function(n){return e.user.docsURL=n}),e.common.hideLoader()}).catch(function(n){e.common.hideLoader(),console.log(n)})},o=0,t=[document.getElementById("docsPDF").files[0]];o<t.length;o++)n()}},{key:"download",value:function(e){window.open(e,"_blank")}},{key:"logout",value:function(){var e=this;this.authService.logout().then(function(){localStorage.clear(),e.router.navigateByUrl("/login",{skipLocationChange:!0,replaceUrl:!0})})}}]),n}(),T.\u0275fac=function(e){return new(e||T)(s.Y36(g.e),s.Y36(d.R),s.Y36(f.v),s.Y36(a.t4),s.Y36(p.sK),s.Y36(u.F0),s.Y36(Z.Q1))},T.\u0275cmp=s.Xpm({type:T,selectors:[["app-profile"]],decls:21,vars:5,consts:[["color","dark"],["slot","start"],[1,"ion-text-center"],["slot","end"],[3,"click"],["name","log-out"],[3,"ngModel","ngModelChange"],["value","profile"],["value","carinfo"],[1,"ion-padding",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"ion-padding"],["expand","block",3,"click"],[2,"text-align","center"],["onerror","this.src='./assets/img/default.png'",2,"width","80px","height","80px","border-radius","100px",3,"src","click"],["ngNoForm",""],["id","avatar","name","file","type","file",3,"change"],["lines","none"],["position","stacked"],["type","text",3,"ngModel","placeholder","ngModelChange"],["type","tel",3,"ngModel","placeholder","ngModelChange"],["type","email","disabled","",3,"ngModel","placeholder","ngModelChange"],[4,"ngIf"],["name","cloud-upload"],[3,"click",4,"ngIf"],["id","docsPDF","name","file","type","file",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","cloud-download"]],template:function(e,n){1&e&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar",0),s.TgZ(2,"ion-buttons",1),s._UZ(3,"ion-menu-button"),s.qZA(),s.TgZ(4,"ion-title",2),s._uU(5),s.qZA(),s.TgZ(6,"ion-buttons",3),s.TgZ(7,"ion-button",4),s.NdJ("click",function(){return n.logout()}),s._UZ(8,"ion-icon",5),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"ion-content"),s.TgZ(10,"ion-segment",6),s.NdJ("ngModelChange",function(e){return n.tabs=e}),s.TgZ(11,"ion-segment-button",7),s._uU(12," DADOS B\xc1SICOS "),s.qZA(),s.TgZ(13,"ion-segment-button",8),s._uU(14," DADOS DO CARRO "),s.qZA(),s.qZA(),s.TgZ(15,"div",9),s.YNc(16,h,25,14,"div",10),s.YNc(17,b,30,17,"div",10),s.qZA(),s.qZA(),s.TgZ(18,"ion-footer",11),s.TgZ(19,"ion-button",12),s.NdJ("click",function(){return n.save()}),s._uU(20,"Salvar"),s.qZA(),s.qZA()),2&e&&(s.xp6(5),s.Oqu(n.user.name),s.xp6(5),s.Q6J("ngModel",n.tabs),s.xp6(5),s.Q6J("ngSwitch",n.tabs),s.xp6(1),s.Q6J("ngSwitchCase","profile"),s.xp6(1),s.Q6J("ngSwitchCase","carinfo"))},directives:[a.Gu,a.sr,a.Sm,a.fG,a.wd,a.YG,a.gu,a.W2,a.cJ,a.QI,c.JJ,c.On,a.GO,r.RF,r.n9,a.fr,a.q_,a.Ie,a.Q$,a.pK,a.j9,a.g2,r.O5,a.t9,r.sg,a.n0],pipes:[p.X$],styles:[".footer-md[_ngcontent-%COMP%]:before, .header-md[_ngcontent-%COMP%]:after{background:none}ion-segment[_ngcontent-%COMP%]{--background:#222;--color:#fff}ion-segment-button[_ngcontent-%COMP%]{--background:#222;--background-checked:#222;--background-focused:#222;--background-hover:#222;--border-color:#fff;--color:#ddd;--color-focused:#fff;--color-checked:#ffeb3b}"]}),T)}],M=function(){var n=o(function n(){e(this,n)});return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[u.Bz.forChild(C)],u.Bz]}),n}(),w=((q=o(function n(){e(this,n)})).\u0275fac=function(e){return new(e||q)},q.\u0275mod=s.oAB({type:q}),q.\u0275inj=s.cJS({imports:[[r.ez,c.u5,a.Pc,p.aw,M]]}),q)}}])}();