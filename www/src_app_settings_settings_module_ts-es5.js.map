{"version":3,"sources":["webpack:///src/app/settings/settings-routing.module.ts","webpack:///src/app/settings/settings.module.ts","webpack:///src/app/settings/settings.page.ts","webpack:///src/app/settings/settings.page.scss","webpack:///src/app/settings/settings.page.html"],"names":["routes","path","component","SettingsPage","SettingsPageRoutingModule","NgModule","imports","RouterModule","exports","SettingsPageModule","CommonModule","FormsModule","IonicModule","TranslateModule","declarations","translate","common","authService","fcm","ss","router","settings","langArr","lang","user","environment","getLang","getSettings","subscribe","res","payload","val","getUserData","then","getUser","uid","valueChanges","changeLang","window","open","driverSupportURL","console","log","isPushEnabled","undefined","getToken","token","update","pushToken","err","logout","localStorage","clear","navigateByUrl","skipLocationChange","replaceUrl","TranslateService","CommonService","AuthService","FirebaseX","SettingService","Router","Component","selector","template"],"mappings":"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","file":"src_app_settings_settings_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SettingsPage } from './settings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SettingsPageRoutingModule } from './settings-routing.module';\n\nimport { SettingsPage } from './settings.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SettingsPageRoutingModule,\n    TranslateModule\n  ],\n  declarations: [SettingsPage]\n})\nexport class SettingsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CommonService } from '../services/common.service';\nimport { environment } from 'src/environments/environment';\nimport { AuthService } from '../services/auth.service';\nimport { FirebaseX } from '@ionic-native/firebase-x/ngx';\nimport { SettingService } from '../services/setting.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n})\nexport class SettingsPage implements OnInit {\n  settings: any = {};\n  langArr = [];\n  lang = 'en';\n  user: any = {};\n\n  constructor(\n    private translate: TranslateService,\n    private common: CommonService,\n    private authService: AuthService,\n    private fcm: FirebaseX,\n    private ss: SettingService,\n    private router: Router\n  ) {\n\n    this.langArr = environment.langArr;\n    this.lang = this.common.getLang();\n    this.ss.getSettings().subscribe(res => res != null ? this.settings = res.payload.val() : this.settings = {});\n  }\n\n  ngOnInit() {\n    this.authService.getUserData().then((user) => {\n      this.authService.getUser(user.uid).valueChanges().subscribe(user => this.user = user)\n    });\n  }\n\n  changeLang() {\n    this.common.changeLang(this.lang);\n  }\n\n  openSupport() {\n    window.open(this.settings.driverSupportURL, \"_blank\");\n  }\n\n  change() {\n    console.log(this.user.isPushEnabled);\n    if (this.user.isPushEnabled == false || this.user.isPushEnabled == undefined) {\n      this.fcm.getToken().then(token => {\n        this.authService.getUser(this.user.uid).update({ isPushEnabled: true, pushToken: token });\n      }).catch(err => {\n        console.log(err);\n        this.authService.getUser(this.user.uid).update({ isPushEnabled: false, pushToken: null });\n      });\n    }\n    else {\n      this.authService.getUser(this.user.uid).update({ isPushEnabled: false, pushToken: null });\n    }\n  }\n\n  logout() {\n    this.authService.logout().then(() => {\n      localStorage.clear();\n      this.router.navigateByUrl('/login', { skipLocationChange: true, replaceUrl: true })\n    });\n  }\n\n}","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzZXR0aW5ncy5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"ion-text-center\\\">Configurações</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n\\n      <ion-button (click)=\\\"logout()\\\">\\n        <ion-icon name=\\\"log-out\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list lines=\\\"none\\\">\\n    <ion-item>\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"{{user.photoURL}}\\\" onerror=\\\"this.src='./assets/img/default-dp.png'\\\" />\\n      </ion-avatar>\\n      <ion-label>\\n        <h3 style=\\\"font-weight: 500;\\\">{{user.name}}</h3>\\n        <p>{{user.phoneNumber}}</p>\\n      </ion-label>\\n      <ion-button slot=\\\"end\\\" color=\\\"dark\\\" fill=\\\"outline\\\" routerLink=\\\"/profile\\\">Editar</ion-button>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"notifications\\\"></ion-icon>\\n      <ion-label>\\n        <h3>Notificações </h3>\\n        <p>Notificações em Texto</p>\\n      </ion-label>\\n      <ion-toggle slot=\\\"end\\\" (click)=\\\"change()\\\" [(ngModel)]=\\\"user.isPushEnabled\\\"></ion-toggle>\\n    </ion-item>\\n    <ion-item (click)=\\\"openSupport()\\\">\\n      <ion-icon slot=\\\"start\\\" name=\\\"help-buoy\\\"></ion-icon>\\n      <ion-label>\\n       Ajuda\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\";"]}