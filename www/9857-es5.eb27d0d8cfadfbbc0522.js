!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[9857],{9857:function(n,i,o){"use strict";o.r(i),o.d(i,{HistoryPageModule:function(){return y}});var r=o(8583),a=o(3679),s=o(2859),c=o(3025),l=o(7716),u=o(7446),g=o(5469),p=o(4207),f=o(7556);function h(t,n){1&t&&(l.TgZ(0,"p",16),l._uU(1,"Nenhum Atendimento at\xe9 o momento"),l.qZA())}function Z(t,n){if(1&t&&(l.TgZ(0,"ion-item",17),l.TgZ(1,"ion-label"),l.TgZ(2,"h3"),l._uU(3),l.ALo(4,"date"),l.qZA(),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.TgZ(7,"p",18),l._UZ(8,"ion-icon",19),l._uU(9),l.qZA(),l.TgZ(10,"p",18),l._UZ(11,"ion-icon",20),l._uU(12),l.qZA(),l.qZA(),l.TgZ(13,"ion-text",21),l._uU(14),l.qZA(),l.qZA()),2&t){var e=n.$implicit;l.xp6(3),l.Oqu(l.xi3(4,7,e.createdAt,"dd MMM , yyyy hh:mm a")),l.xp6(3),l.AsE("",e.createdAt," \u2022 ",e.status,""),l.xp6(3),l.hij(" ",e.origin.vicinity," "),l.xp6(3),l.hij(" ",e.destination.vicinity," "),l.xp6(2),l.AsE("",e.currency," ",e.commission," ")}}var m,d,A=[{path:"",component:(m=function(){function n(e,i,o,r,a){var s=this;t(this,n),this.tripService=e,this.translate=i,this.ss=o,this.authService=r,this.router=a,this.trips=[],this.earning=0,this.filter="today",this.allTrips=[],this.settings={},this.today=(new Date).toISOString(),this.fromDate=(new Date).toISOString(),this.toDate=(new Date).toISOString(),this.ss.getSettings().subscribe(function(t){return s.settings=null!=t?t.payload.val():{}})}return e(n,[{key:"ngOnInit",value:function(){var t=this;this.authService.getUserData().then(function(n){t.tripService.getTrips(n.uid).valueChanges().subscribe(function(n){null!=n&&(t.trips=n,t.allTrips=t.trips,t.allTrips.reverse(),t.calculateEarning())})})}},{key:"logout",value:function(){var t=this;this.authService.logout().then(function(){localStorage.clear(),t.router.navigateByUrl("/login",{skipLocationChange:!0,replaceUrl:!0})})}},{key:"calculateEarning",value:function(){var t=0;this.trips.forEach(function(n){null!=n.commission&&null!=n.commission&&(t+=parseFloat(n.commission))}),this.earning=t}},{key:"applyFilter",value:function(){this.trips=this.allTrips;var t=new Date(this.fromDate);t.setHours(0,0,0,0);var n=t.getTime(),e=new Date(this.toDate);e.setHours(23,59,59,999);var i=e.getTime(),o=this.trips.filter(function(t){return t.createdAt>=n&&t.createdAt<=i});this.trips=o,this.calculateEarning()}},{key:"reset",value:function(){this.trips=this.allTrips,this.calculateEarning()}}]),n}(),m.\u0275fac=function(t){return new(t||m)(l.Y36(u.a),l.Y36(g.sK),l.Y36(p.R),l.Y36(f.e),l.Y36(c.F0))},m.\u0275cmp=l.Xpm({type:m,selectors:[["app-history"]],decls:30,vars:14,consts:[["color","dark"],["slot","start"],[1,"ion-text-center"],["slot","end"],[3,"click"],["name","log-out"],[2,"padding","4px","background","#fbfbfb"],[3,"max","value","ngModel","ngModelChange"],[3,"max","min","value","ngModel","ngModelChange"],["size","small","fill","clear",3,"click"],["name","filter-outline"],["name","refresh-outline"],["lines","none"],["slot","end",1,"total-earning"],["style","margin-top: 5px; text-align: center",4,"ngIf"],["class","trip",4,"ngFor","ngForOf"],[2,"margin-top","5px","text-align","center"],[1,"trip"],["text-wrap",""],["name","pin",2,"color","#F44336"],["name","pin",2,"color","#4caf50"],["slot","end",1,"earning"]],template:function(t,n){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-menu-button"),l.qZA(),l.TgZ(4,"ion-title",2),l._uU(5,"Atendimentos"),l.qZA(),l.TgZ(6,"ion-buttons",3),l.TgZ(7,"ion-button",4),l.NdJ("click",function(){return n.logout()}),l._UZ(8,"ion-icon",5),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.TgZ(10,"div",6),l.TgZ(11,"ion-row"),l.TgZ(12,"ion-col"),l.TgZ(13,"ion-datetime",7),l.NdJ("ngModelChange",function(t){return n.fromDate=t}),l.qZA(),l.qZA(),l.TgZ(14,"ion-col"),l.TgZ(15,"ion-datetime",8),l.NdJ("ngModelChange",function(t){return n.toDate=t}),l.qZA(),l.qZA(),l.TgZ(16,"ion-col"),l.TgZ(17,"ion-button",9),l.NdJ("click",function(){return n.applyFilter()}),l._UZ(18,"ion-icon",10),l.qZA(),l.TgZ(19,"ion-button",9),l.NdJ("click",function(){return n.reset()}),l._UZ(20,"ion-icon",11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"ion-list",12),l.TgZ(22,"ion-item"),l.TgZ(23,"ion-label"),l._uU(24,"Faturamento"),l.qZA(),l.TgZ(25,"ion-text",13),l._uU(26),l.ALo(27,"number"),l.qZA(),l.qZA(),l.YNc(28,h,2,0,"p",14),l.YNc(29,Z,15,10,"ion-item",15),l.qZA(),l.qZA()),2&t&&(l.xp6(13),l.s9C("max",n.today),l.s9C("value",n.today),l.Q6J("ngModel",n.fromDate),l.xp6(2),l.s9C("max",n.today),l.s9C("min",n.fromDate),l.s9C("value",n.today),l.Q6J("ngModel",n.toDate),l.xp6(11),l.AsE(" ",n.settings.currency," ",l.xi3(27,11,n.earning,"1.2-2")," "),l.xp6(2),l.Q6J("ngIf",0==n.trips.length),l.xp6(1),l.Q6J("ngForOf",n.trips))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.wd,s.YG,s.gu,s.W2,s.Nd,s.wI,s.x4,s.QI,a.JJ,a.On,s.q_,s.Ie,s.Q$,s.yW,r.O5,r.sg],pipes:[r.JJ,r.uU],styles:[".total-earning[_ngcontent-%COMP%]{font-size:18px}.earning[_ngcontent-%COMP%], .total-earning[_ngcontent-%COMP%]{color:#4caf50;font-weight:600}.earning[_ngcontent-%COMP%]{margin-left:4px}p[_ngcontent-%COMP%]{color:#777}ion-item[_ngcontent-%COMP%]{margin:8px;--background:#fbfbfb;border-radius:4px}.trip[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:14px}"]}),m)}],v=function(){var n=e(function n(){t(this,n)});return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[c.Bz.forChild(A)],c.Bz]}),n}(),y=((d=e(function n(){t(this,n)})).\u0275fac=function(t){return new(t||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[r.ez,a.u5,s.Pc,g.aw,v]]}),d)}}])}();