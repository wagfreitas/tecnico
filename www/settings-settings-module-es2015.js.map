{"version":3,"sources":["./src/app/settings/settings.page.html","./src/app/settings/settings-routing.module.ts","./src/app/settings/settings.module.ts","./src/app/settings/settings.page.scss","./src/app/settings/settings.page.ts"],"names":[],"mappings":"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","file":"settings-settings-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>{{ 'SETTINGS' | translate}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list lines=\\\"none\\\">\\n    <ion-item>\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"{{user.photoURL}}\\\" onerror=\\\"this.src='./assets/img/default.png'\\\" />\\n      </ion-avatar>\\n      <ion-label>\\n        <h3 style=\\\"font-weight: 500;\\\">{{user.name}}</h3>\\n        <p>{{user.phoneNumber}}</p>\\n      </ion-label>\\n      <ion-button slot=\\\"end\\\" color=\\\"dark\\\" fill=\\\"outline\\\" routerLink=\\\"/profile\\\">{{'EDIT' | translate}}</ion-button>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"globe\\\"></ion-icon>\\n      <ion-label>\\n        <h3>{{'LANGUAGE' | translate}}</h3>\\n        <p>{{'CHANGE_LANGUAGE' | translate}}</p>\\n      </ion-label>\\n      <ion-select placeholder=\\\"Language\\\" (ionChange)=\\\"changeLang()\\\" [(ngModel)]=\\\"lang\\\" slot=\\\"end\\\">\\n        <ion-select-option *ngFor=\\\"let lang of langArr\\\" value=\\\"{{lang.code}}\\\">{{lang.name}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"notifications\\\"></ion-icon>\\n      <ion-label>\\n        <h3>{{'PUSH_NOTIFICATION' | translate}}</h3>\\n        <p>{{'PUSH_NOTIFICATION_TEXT' | translate}}</p>\\n      </ion-label>\\n      <ion-toggle slot=\\\"end\\\" (click)=\\\"change()\\\" [(ngModel)]=\\\"user.isPushEnabled\\\"></ion-toggle>\\n    </ion-item>\\n    <ion-item (click)=\\\"openSupport()\\\">\\n      <ion-icon slot=\\\"start\\\" name=\\\"help-buoy\\\"></ion-icon>\\n      <ion-label>\\n        {{'HELP' | translate}}\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SettingsPage } from './settings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SettingsPageRoutingModule } from './settings-routing.module';\n\nimport { SettingsPage } from './settings.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SettingsPageRoutingModule,\n    TranslateModule\n  ],\n  declarations: [SettingsPage]\n})\nexport class SettingsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NldHRpbmdzL3NldHRpbmdzLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CommonService } from '../services/common.service';\nimport { environment } from \"../../environments/environment.prod\";\nimport { AuthService } from '../services/auth.service';\nimport { FirebaseX } from '@ionic-native/firebase-x/ngx';\nimport { SettingService } from '../services/setting.service';\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n})\nexport class SettingsPage implements OnInit {\n  settings: any = {};\n  langArr = [];\n  lang = 'en';\n  user: any = {};\n\n  constructor(\n    private translate: TranslateService,\n    private common: CommonService,\n    private authService: AuthService,\n    private fcm: FirebaseX,\n    private ss: SettingService\n  ) {\n\n    this.langArr = environment.langArr;\n    this.lang = this.common.getLang();\n    this.ss.getSettings().subscribe(res => res != null ? this.settings = res.payload.val() : this.settings = {});\n  }\n\n  ngOnInit() {\n    this.authService.getUserData().then((user) => {\n      this.authService.getUser(user.uid).valueChanges().subscribe(user => this.user = user)\n    });\n  }\n\n  changeLang() {\n    this.common.changeLang(this.lang);\n  }\n\n  openSupport() {\n    window.open(this.settings.driverSupportURL, \"_blank\");\n  }\n\n  change() {\n    console.log(this.user.isPushEnabled);\n    if (this.user.isPushEnabled == false || this.user.isPushEnabled == undefined) {\n      this.fcm.getToken().then(token => {\n        this.authService.getUser(this.user.uid).update({ isPushEnabled: true, pushToken: token });\n      }).catch(err => {\n        console.log(err);\n        this.authService.getUser(this.user.uid).update({ isPushEnabled: false, pushToken: null });\n      });\n    }\n    else {\n      this.authService.getUser(this.user.uid).update({ isPushEnabled: false, pushToken: null });\n    }\n  }\n\n}"],"sourceRoot":"webpack:///"}